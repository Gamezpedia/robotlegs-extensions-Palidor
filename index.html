<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Robotlegs-extensions-palidor : An extension to enable integration of Starling and Robotlegs">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Robotlegs-extensions-palidor</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/RonaldoSetzer/robotlegs-extensions-Palidor">View on GitHub</a>

          <h1 id="project_title">Palidor</h1>
          <h2 id="project_tagline">Robotlegs + Starling + As3Signal</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/RonaldoSetzer/robotlegs-extensions-Palidor/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/RonaldoSetzer/robotlegs-extensions-Palidor/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
      <img src="palidor-cover.png"/>

<h1>Palidor Bundle</h1>
<ul>
  <li>StarlingIntegration</li>
  <li>StarlingContextView</li>
  <li>StarlingViewMap</li>
  <li>StarlingMediator</li>
  <li>StarlingViewManager</li>
  <li>StarlingCommandMap</li>
  <li>FlowManager</li>
  <li>SignalCommandMap</li>
  <li>KeyCommandMap</li>
  <li>KeyDispatcher</li>
</ul>

<h2>Dependencies</h2>
<ul>
  <li><a href="https://github.com/Gamua/Starling-Framework">Starling</a></li>
  <li><a href="https://github.com/robotlegs/robotlegs-framework">Robotlegs 2</a></li>
  <li><a href="https://flex.apache.org/download-flexunit.html">FlexUnit 4</a></li>
  <li><a href="https://github.com/robertpenner/as3-signals">as3-signals</a></li>
</ul>

<h2>Setup</h2>

<div class="highlight"><pre>
<span class="kd">const</span> robotlegsContext:<span class="kt">IContext</span> = <span class="k">new</span> <span class="nc">Context</span>();
robotlegsContext.<span class="na">install</span>( <span class="nc">PalidorBundle</span> );
robotlegsContext.<span class="na">configure</span>( <span class="nc">YourConfig</span>, starling, <span class="k">new</span> <span class="nc">ContextView</span>( <span class="k">this</span> ) );
</pre></div>

<h3>IConfig Example</h3>

<div class="highlight"><pre>
<span class="kd">public</span> <span class="kd">class</span> YourConfig<span class="kd"> implements </span>IConfig
<span class="o">{</span>
    <span class="nt">[Inject]</span>
    <span class="kd">public</span> <span class="kd">var</span> eventDispatcher:<span class="kt">EventDispatcher</span>; <span class="c">//starling.events.EventDispatcher</span>

    <span class="nt">[Inject]</span>
    <span class="kd">public</span> <span class="kd">var</span> mediatorMap:<span class="kt">IMediatorMap</span>;

    <span class="nt">[Inject]</span>
    <span class="kd">public</span> <span class="kd">var</span> context:<span class="kt">IContext</span>;

    <span class="nt">[Inject]</span>
    <span class="kd">public</span> <span class="kd">var</span> flowManager:<span class="kt">IFlowManager</span>;

    <span class="nt">[Inject]</span>
    <span class="kd">public</span> <span class="kd">var</span> commandMap:<span class="kt">IStarlingCommandMap</span>;

    <span class="kd">public</span> <span class="kd">function </span><span class="nf">configure</span>():<span class="kt">void</span>
    <span class="o">{</span>
        context.<span class="na">afterInitializing</span>( initialize );
    }

    <span class="kd">private</span> <span class="kd">function </span><span class="nf">initialize</span>():<span class="kt">void</span>
    <span class="o">{</span>
        commandMap.<span class="na">map</span>( <span class="nc">CustomEvent</span>.<span class="no">COMMAND_01</span> ).<span class="na">toCommand</span>( <span class="nc">FirstCommand</span> );
        commandMap.<span class="na">map</span>( <span class="nc">CustomEvent</span>.<span class="no">COMMAND_02</span> ).<span class="na">toCommand</span>( <span class="nc">SecondCommand</span> );

        mediatorMap.<span class="na">map</span>( <span class="nc">FirstView</span> ).<span class="na">toMediator</span>( <span class="nc">FirstViewMediator</span> );
        mediatorMap.<span class="na">map</span>( <span class="nc">FirstFloatingView</span> ).<span class="na">toMediator</span>( <span class="nc">FirstFloatingViewMediator</span> );

        flowManager.<span class="na">map</span>( <span class="nc">CustomEvent</span>.<span class="no">SHOW_FIRST_VIEW</span> ).<span class="na">toView</span>( <span class="nc">FirstView</span> );
        flowManager.<span class="na">map</span>( <span class="nc">CustomEvent</span>.<span class="no">SHOW_FIRST_FLOATING_VIEW</span> ).<span class="na">toFloatingView</span>( FirstFloatingView );

        eventDispatcher.<span class="na">dispatchEventWith</span>( <span class="nc">CustomEvent</span>.<span class="no">SHOW_FIRST_VIEW</span> );
    }
}</pre></div>

<h2>Starling Mediator</h2>

<h3>Mapping</h3>

<div class="highlight"><pre>
mediatorMap.<span class="na">map</span>( <span class="nc">FirstView</span> ).<span class="na">toMediator</span>( <span class="nc">FirstViewMediator</span> );
</pre></div>

<h3>Mediator Architecture</h3>

<div class="highlight"><pre>
<span class="kd">public</span> <span class="kd">class</span> FirstViewMediator<span class="kd"> extends </span>StarlingMediator
<span class="o">{</span>
    <span class="nt">[Inject]</span>
    <span class="kd">public</span> <span class="kd">var</span> view:<span class="kt">FirstView</span>;

    <span class="kd">override </span><span class="kd">public</span> <span class="kd">function </span><span class="nf">initialize</span>():<span class="kt">void</span>
    <span class="o">{</span>
        <span class="c">// view added on Stage</span>
    }

    <span class="kd">override </span><span class="kd">public</span> <span class="kd">function </span><span class="nf">destroy</span>():<span class="kt">void</span>
    <span class="o">{</span>
        <span class="c">// view removed from Stage</span>
    }
}</pre></div>

<h2>EventMap</h2>

<div class="highlight"><pre>
eventMap.<span class="na">mapListener</span>( view,<span class="nc"> Event</span>.<span class="no">COMPLETE</span>, handler );
eventMap.<span class="na">mapListener</span>( view.<span class="na">button</span>, <span class="nc">Event</span>.<span class="no">TRIGGERED</span>, handler );
eventMap.<span class="na">mapListener</span>( eventDispatcher, <span class="nc">Event</span>.<span class="no">COMPLETE</span>, handler);
</pre></div>

<h2>Command Pattern</h2>
<ul>
  <li>StarlingCommandMap</li>
  <li>SignalCommandMap</li>
  <li>KeyCommandMap</li>
</ul>

<h3>Mapping</h3>

<div class="highlight"><pre>
<span class="nt">[Inject]</span>
<span class="kd">public</span> <span class="kd">var</span> starlingCommandMap:<span class="kt">IStarlingCommandMap</span>;

<span class="nt">[Inject]</span>
<span class="kd">public</span> <span class="kd">var</span> signalCommandMap:<span class="kt">ISignalCommandMap</span>;

<span class="nt">[Inject]</span>
<span class="kd">public</span> <span class="kd">var</span> keyCommandMap:<span class="kt">IKeyCommandMap</span>;

<span class="kd">private</span> <span class="kd">function </span><span class="nf">initialize</span>():<span class="kt">void</span>
<span class="o">{</span>
    starlingCommandMap.<span class="na">map</span>( <span class="nc">CustomEvent</span>.<span class="no">COMMAND_01</span> ).<span class="na">toCommand</span>( <span class="nc">FirstCommand</span> );
    signalCommandMap.<span class="na">map</span>( <span class="nc">CustomSignal</span> ).<span class="na">toCommand</span>( <span class="nc">FirstCommand</span> );
    keyCommandMap.<span class="na">map</span>( <span class="s">"command01"</span> ).<span class="na">toCommand</span>( <span class="nc">FirstCommand</span> );
}</pre></div>

<h3>Command Architecture</h3>

<div class="highlight"><pre>
<span class="k">import</span> <span class="nn">robotlegs.bender.bundles.mvcs.Command</span>;
<span class="k">import</span> <span class="nn">starling.events.EventDispatcher</span>;

<span class="kd">public</span> <span class="kd">class</span> FirstCommand<span class="kd"> extends </span>Command
<span class="o">{</span>
    <span class="nt">[Inject]</span>
    <span class="kd">public</span> <span class="kd">var</span> eventDispatcher:<span class="kt">EventDispatcher</span>;

    <span class="kd">override </span><span class="kd">public</span> <span class="kd">function </span><span class="nf">execute</span>():<span class="kt">void</span>
    <span class="o">{</span>
        <span class="c">//your command</span>
    }
}</pre></div>

<h3>Calling a Command</h3>

<div class="highlight"><pre>
<span class="nt">[Inject]</span>
<span class="kd">public</span> <span class="kd">var</span> eventDispatcher<span class="kt">EventDispatcher</span>; <span class="c">//starling.events.EventDispatcher</span>

<span class="nt">[Inject]</span>
<span class="kd">public</span> <span class="kd">var</span> customSignal:<span class="kt">CustomSignal</span>; <span class="c">//your custom signal</span>

<span class="nt">[Inject]</span>
<span class="kd">public</span> <span class="kd">var</span> keyDispatcher:<span class="kt">IKeyDispatcher</span>;

<span class="kd">private</span> <span class="kd">function </span><span class="nf">initialize</span>():<span class="kt">void</span>
<span class="o">{</span>
    eventDispatcher.<span class="na">dispatchEventWith</span>( <span class="nc">CustomEvent</span>.<span class="no">COMMAND_01</span> );

    customSignal.<span class="na">dispatch</span>();

    keyCommandMap.<span class="na">dispatch</span>( <span class="s">"command01"</span> );
}</pre></div>

<h2>View Manager and Flow Manager</h2>
<ul>
  <li>View</li>
  <li>FloatingView</li>
</ul>

<h3>Mapping</h3>

<div class="highlight"><pre>
flowManager.<span class="na">map</span>( <span class="nc">CustomEvent</span>.<span class="no">SHOW_FIRST_VIEW</span> ).<span class="na">toView</span>( <span class="nc">FirstView</span> );
flowManager.<span class="na">map</span>( <span class="nc">CustomEvent</span>.<span class="no">SHOW_FIRST_FLOATING_VIEW</span> ).<span class="na">toFloatingView</span>( <span class="nc">FirstFloatingView</span> );
</pre></div>

<h3>Adding a new View</h3>

<div class="highlight"><pre>
eventDispatcher.<span class="na">dispatchEventWith</span>( <span class="nc">CustomEvent</span>.<span class="no">SHOW_FIRST_VIEW</span> );
</pre></div>


      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Robotlegs-extensions-palidor maintained by <a href="https://github.com/RonaldoSetzer">RonaldoSetzer</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
